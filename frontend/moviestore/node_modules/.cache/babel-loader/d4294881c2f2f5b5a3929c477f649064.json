{"ast":null,"code":"import jwtDecode from 'jwt-decode';\nimport http, { setJwt } from '../httpService';\nconst apiAuthEndpoint = '/auth';\nconst tokenKey = 'token';\nexport async function login(userName, password) {\n  const {\n    data\n  } = await http.post(`${apiAuthEndpoint}/login`, {\n    userName,\n    password\n  });\n  console.log(data.token);\n  localStorage.setItem(tokenKey, jwt);\n}\nexport async function register(userName, password) {\n  const {\n    data: jwt\n  } = await http.post(apiAuthEndpoint, {\n    userName,\n    password\n  });\n  localStorage.setItem(tokenKey, jwt);\n}\nexport function loginWithJwt(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n}\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n}\nexport function getJwt() {\n  return localStorage.getItem(tokenKey);\n}\nsetJwt(getJwt());\nexport default {\n  login,\n  register,\n  loginWithJwt,\n  logout,\n  getCurrentUser,\n  getJwt\n};","map":{"version":3,"sources":["/Users/fabiorosa/Study/locadora-filmes/frontend/moviestore/src/services/Auth/authService.js"],"names":["jwtDecode","http","setJwt","apiAuthEndpoint","tokenKey","login","userName","password","data","post","console","log","token","localStorage","setItem","jwt","register","loginWithJwt","logout","removeItem","getCurrentUser","getItem","ex","getJwt"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,OAAOC,IAAP,IAAeC,MAAf,QAA6B,gBAA7B;AAEA,MAAMC,eAAe,GAAG,OAAxB;AACA,MAAMC,QAAQ,GAAG,OAAjB;AAEA,OAAO,eAAeC,KAAf,CAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAC9C,QAAM;AAAEC,IAAAA;AAAF,MAAW,MAAMP,IAAI,CAACQ,IAAL,CAAW,GAAEN,eAAgB,QAA7B,EAAsC;AAC3DG,IAAAA,QAD2D;AAE3DC,IAAAA;AAF2D,GAAtC,CAAvB;AAIAG,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACI,KAAjB;AACAC,EAAAA,YAAY,CAACC,OAAb,CAAqBV,QAArB,EAA+BW,GAA/B;AACD;AAED,OAAO,eAAeC,QAAf,CAAwBV,QAAxB,EAAkCC,QAAlC,EAA4C;AACjD,QAAM;AAAEC,IAAAA,IAAI,EAAEO;AAAR,MAAgB,MAAMd,IAAI,CAACQ,IAAL,CAAUN,eAAV,EAA2B;AACrDG,IAAAA,QADqD;AAErDC,IAAAA;AAFqD,GAA3B,CAA5B;AAIAM,EAAAA,YAAY,CAACC,OAAb,CAAqBV,QAArB,EAA+BW,GAA/B;AACD;AAED,OAAO,SAASE,YAAT,CAAsBF,GAAtB,EAA2B;AAChCF,EAAAA,YAAY,CAACC,OAAb,CAAqBV,QAArB,EAA+BW,GAA/B;AACD;AAED,OAAO,SAASG,MAAT,GAAkB;AACvBL,EAAAA,YAAY,CAACM,UAAb,CAAwBf,QAAxB;AACD;AAED,OAAO,SAASgB,cAAT,GAA0B;AAC/B,MAAI;AACF,UAAML,GAAG,GAAGF,YAAY,CAACQ,OAAb,CAAqBjB,QAArB,CAAZ;AACA,WAAOJ,SAAS,CAACe,GAAD,CAAhB;AACD,GAHD,CAGE,OAAOO,EAAP,EAAW;AACX,WAAO,IAAP;AACD;AACF;AAED,OAAO,SAASC,MAAT,GAAkB;AACvB,SAAOV,YAAY,CAACQ,OAAb,CAAqBjB,QAArB,CAAP;AACD;AAEDF,MAAM,CAACqB,MAAM,EAAP,CAAN;AAEA,eAAe;AACblB,EAAAA,KADa;AAEbW,EAAAA,QAFa;AAGbC,EAAAA,YAHa;AAIbC,EAAAA,MAJa;AAKbE,EAAAA,cALa;AAMbG,EAAAA;AANa,CAAf","sourcesContent":["import jwtDecode from 'jwt-decode';\nimport http, { setJwt } from '../httpService';\n\nconst apiAuthEndpoint = '/auth';\nconst tokenKey = 'token';\n\nexport async function login(userName, password) {\n  const { data } = await http.post(`${apiAuthEndpoint}/login`, {\n    userName,\n    password,\n  });\n  console.log(data.token);\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport async function register(userName, password) {\n  const { data: jwt } = await http.post(apiAuthEndpoint, {\n    userName,\n    password,\n  });\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function loginWithJwt(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\n\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n}\n\nexport function getJwt() {\n  return localStorage.getItem(tokenKey);\n}\n\nsetJwt(getJwt());\n\nexport default {\n  login,\n  register,\n  loginWithJwt,\n  logout,\n  getCurrentUser,\n  getJwt,\n};\n"]},"metadata":{},"sourceType":"module"}