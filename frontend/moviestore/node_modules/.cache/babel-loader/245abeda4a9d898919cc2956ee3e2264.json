{"ast":null,"code":"var _jsxFileName = \"/Users/fabiorosa/Study/locadora-filmes/frontend/moviestore/src/pages/Movies/index.js\";\n\n/* eslint-disable react/forbid-prop-types */\nimport React, { useState, useEffect } from 'react';\nimport Container from '@material-ui/core/Container';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport PropTypes from 'prop-types';\nimport Table from '../../components/Table';\nimport { getMovies, deleteMovie, deleteMovies } from '../../services/Movies/movieService';\nimport useStyles from './styles';\nexport default function Movies({\n  history,\n  moviesSelected,\n  onSelectMovie,\n  allowCrud\n}) {\n  const classes = useStyles();\n  const [selected, setSelected] = useState([]);\n  const [rows, setRows] = useState([]);\n  const headCells = [{\n    id: 'name',\n    numeric: false,\n    disablePadding: true,\n    label: 'Nome'\n  }, {\n    id: 'genre',\n    numeric: false,\n    disablePadding: true,\n    label: 'Gênero'\n  }, {\n    id: 'creationDate',\n    numeric: false,\n    disablePadding: true,\n    label: 'Data Criação'\n  }, {\n    id: 'status',\n    numeric: false,\n    disablePadding: true,\n    label: 'Status'\n  }];\n\n  async function loadMovies() {\n    const {\n      data\n    } = await getMovies();\n    const movies = data.map(m => {\n      return {\n        id: m.id,\n        name: m.name,\n        genre: m.genre.name,\n        creationDate: new Date(m.creationDate).toLocaleDateString(),\n        status: m.status === 1 ? 'Ativo' : 'Inativo'\n      };\n    });\n    setRows(movies);\n  }\n\n  const handleAdd = () => {\n    history.push('/movies/0');\n  };\n\n  const handleEdit = () => {\n    const movieId = selected[0];\n    history.push(`/movies/${movieId}`);\n  };\n\n  const handleSelect = arrSelected => {\n    setSelected(arrSelected);\n\n    if (onSelectMovie) {\n      onSelectMovie(arrSelected);\n    }\n  };\n\n  useEffect(() => {\n    loadMovies();\n\n    if (moviesSelected) {\n      handleSelect(moviesSelected);\n    }\n  }, [moviesSelected]);\n\n  const handleDelete = async () => {\n    if (selected.length > 1) {\n      await deleteMovies(selected);\n    } else {\n      const movieId = selected[0];\n      await deleteMovie(movieId);\n    }\n\n    setSelected([]);\n    await loadMovies();\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    title: \"Filmes\",\n    headCells: headCells,\n    rows: rows,\n    selected: selected,\n    setSelected: handleSelect,\n    defaultSortedProperty: \"name\",\n    onAdd: allowCrud && handleAdd || null,\n    onEdit: allowCrud && handleEdit || null,\n    onDelete: allowCrud && handleDelete || null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  })));\n}\nMovies.defaultProps = {\n  history: null,\n  moviesSelected: null,\n  onSelectMovie: null,\n  allowCrud: true\n};\nMovies.propTypes = {\n  history: PropTypes.any,\n  moviesSelected: PropTypes.array,\n  onSelectMovie: PropTypes.func,\n  allowCrud: PropTypes.bool\n};","map":{"version":3,"sources":["/Users/fabiorosa/Study/locadora-filmes/frontend/moviestore/src/pages/Movies/index.js"],"names":["React","useState","useEffect","Container","CssBaseline","PropTypes","Table","getMovies","deleteMovie","deleteMovies","useStyles","Movies","history","moviesSelected","onSelectMovie","allowCrud","classes","selected","setSelected","rows","setRows","headCells","id","numeric","disablePadding","label","loadMovies","data","movies","map","m","name","genre","creationDate","Date","toLocaleDateString","status","handleAdd","push","handleEdit","movieId","handleSelect","arrSelected","handleDelete","length","paper","defaultProps","propTypes","any","array","func","bool"],"mappings":"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","sourcesContent":["/* eslint-disable react/forbid-prop-types */\nimport React, { useState, useEffect } from 'react';\nimport Container from '@material-ui/core/Container';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport PropTypes from 'prop-types';\nimport Table from '../../components/Table';\nimport {\n  getMovies,\n  deleteMovie,\n  deleteMovies,\n} from '../../services/Movies/movieService';\nimport useStyles from './styles';\n\nexport default function Movies({\n  history,\n  moviesSelected,\n  onSelectMovie,\n  allowCrud,\n}) {\n  const classes = useStyles();\n  const [selected, setSelected] = useState([]);\n  const [rows, setRows] = useState([]);\n\n  const headCells = [\n    {\n      id: 'name',\n      numeric: false,\n      disablePadding: true,\n      label: 'Nome',\n    },\n    {\n      id: 'genre',\n      numeric: false,\n      disablePadding: true,\n      label: 'Gênero',\n    },\n    {\n      id: 'creationDate',\n      numeric: false,\n      disablePadding: true,\n      label: 'Data Criação',\n    },\n    { id: 'status', numeric: false, disablePadding: true, label: 'Status' },\n  ];\n\n  async function loadMovies() {\n    const { data } = await getMovies();\n    const movies = data.map(m => {\n      return {\n        id: m.id,\n        name: m.name,\n        genre: m.genre.name,\n        creationDate: new Date(m.creationDate).toLocaleDateString(),\n        status: m.status === 1 ? 'Ativo' : 'Inativo',\n      };\n    });\n    setRows(movies);\n  }\n\n  const handleAdd = () => {\n    history.push('/movies/0');\n  };\n\n  const handleEdit = () => {\n    const movieId = selected[0];\n    history.push(`/movies/${movieId}`);\n  };\n\n  const handleSelect = arrSelected => {\n    setSelected(arrSelected);\n    if (onSelectMovie) {\n      onSelectMovie(arrSelected);\n    }\n  };\n\n  useEffect(() => {\n    loadMovies();\n    if (moviesSelected) {\n      handleSelect(moviesSelected);\n    }\n  }, [moviesSelected]);\n\n  const handleDelete = async () => {\n    if (selected.length > 1) {\n      await deleteMovies(selected);\n    } else {\n      const movieId = selected[0];\n      await deleteMovie(movieId);\n    }\n    setSelected([]);\n    await loadMovies();\n  };\n\n  return (\n    <Container component=\"main\">\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Table\n          title=\"Filmes\"\n          headCells={headCells}\n          rows={rows}\n          selected={selected}\n          setSelected={handleSelect}\n          defaultSortedProperty=\"name\"\n          onAdd={(allowCrud && handleAdd) || null}\n          onEdit={(allowCrud && handleEdit) || null}\n          onDelete={(allowCrud && handleDelete) || null}\n        />\n      </div>\n    </Container>\n  );\n}\n\nMovies.defaultProps = {\n  history: null,\n  moviesSelected: null,\n  onSelectMovie: null,\n  allowCrud: true,\n};\n\nMovies.propTypes = {\n  history: PropTypes.any,\n  moviesSelected: PropTypes.array,\n  onSelectMovie: PropTypes.func,\n  allowCrud: PropTypes.bool,\n};\n"]},"metadata":{},"sourceType":"module"}