{"ast":null,"code":"import jwtDecode from 'jwt-decode';\nimport http, { setJwt } from '../httpService';\nconst apiAuthEndpoint = '/auth';\nconst tokenKey = 'token';\nexport async function login(userName, password) {\n  const {\n    data: jwt\n  } = await http.post(`${apiAuthEndpoint}/login`, {\n    userName,\n    password\n  });\n  console.log(jwt);\n  localStorage.setItem(tokenKey, jwt);\n}\nexport async function register(userName, password) {\n  const {\n    data: jwt\n  } = await http.post(apiAuthEndpoint, {\n    userName,\n    password\n  });\n  localStorage.setItem(tokenKey, jwt);\n}\nexport function loginWithJwt(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n}\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n}\nexport function getJwt() {\n  return localStorage.getItem(tokenKey);\n}\nsetJwt(getJwt());\nexport default {\n  login,\n  register,\n  loginWithJwt,\n  logout,\n  getCurrentUser,\n  getJwt\n};","map":{"version":3,"sources":["/Users/fabiorosa/Study/locadora-filmes/frontend/moviestore/src/services/Auth/authService.js"],"names":["jwtDecode","http","setJwt","apiAuthEndpoint","tokenKey","login","userName","password","data","jwt","post","console","log","localStorage","setItem","register","loginWithJwt","logout","removeItem","getCurrentUser","getItem","ex","getJwt"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,OAAOC,IAAP,IAAeC,MAAf,QAA6B,gBAA7B;AAEA,MAAMC,eAAe,GAAG,OAAxB;AACA,MAAMC,QAAQ,GAAG,OAAjB;AAEA,OAAO,eAAeC,KAAf,CAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAC9C,QAAM;AAAEC,IAAAA,IAAI,EAAEC;AAAR,MAAgB,MAAMR,IAAI,CAACS,IAAL,CAAW,GAAEP,eAAgB,QAA7B,EAAsC;AAChEG,IAAAA,QADgE;AAEhEC,IAAAA;AAFgE,GAAtC,CAA5B;AAIAI,EAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACAI,EAAAA,YAAY,CAACC,OAAb,CAAqBV,QAArB,EAA+BK,GAA/B;AACD;AAED,OAAO,eAAeM,QAAf,CAAwBT,QAAxB,EAAkCC,QAAlC,EAA4C;AACjD,QAAM;AAAEC,IAAAA,IAAI,EAAEC;AAAR,MAAgB,MAAMR,IAAI,CAACS,IAAL,CAAUP,eAAV,EAA2B;AACrDG,IAAAA,QADqD;AAErDC,IAAAA;AAFqD,GAA3B,CAA5B;AAIAM,EAAAA,YAAY,CAACC,OAAb,CAAqBV,QAArB,EAA+BK,GAA/B;AACD;AAED,OAAO,SAASO,YAAT,CAAsBP,GAAtB,EAA2B;AAChCI,EAAAA,YAAY,CAACC,OAAb,CAAqBV,QAArB,EAA+BK,GAA/B;AACD;AAED,OAAO,SAASQ,MAAT,GAAkB;AACvBJ,EAAAA,YAAY,CAACK,UAAb,CAAwBd,QAAxB;AACD;AAED,OAAO,SAASe,cAAT,GAA0B;AAC/B,MAAI;AACF,UAAMV,GAAG,GAAGI,YAAY,CAACO,OAAb,CAAqBhB,QAArB,CAAZ;AACA,WAAOJ,SAAS,CAACS,GAAD,CAAhB;AACD,GAHD,CAGE,OAAOY,EAAP,EAAW;AACX,WAAO,IAAP;AACD;AACF;AAED,OAAO,SAASC,MAAT,GAAkB;AACvB,SAAOT,YAAY,CAACO,OAAb,CAAqBhB,QAArB,CAAP;AACD;AAEDF,MAAM,CAACoB,MAAM,EAAP,CAAN;AAEA,eAAe;AACbjB,EAAAA,KADa;AAEbU,EAAAA,QAFa;AAGbC,EAAAA,YAHa;AAIbC,EAAAA,MAJa;AAKbE,EAAAA,cALa;AAMbG,EAAAA;AANa,CAAf","sourcesContent":["import jwtDecode from 'jwt-decode';\nimport http, { setJwt } from '../httpService';\n\nconst apiAuthEndpoint = '/auth';\nconst tokenKey = 'token';\n\nexport async function login(userName, password) {\n  const { data: jwt } = await http.post(`${apiAuthEndpoint}/login`, {\n    userName,\n    password,\n  });\n  console.log(jwt);\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport async function register(userName, password) {\n  const { data: jwt } = await http.post(apiAuthEndpoint, {\n    userName,\n    password,\n  });\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function loginWithJwt(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\n\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n}\n\nexport function getJwt() {\n  return localStorage.getItem(tokenKey);\n}\n\nsetJwt(getJwt());\n\nexport default {\n  login,\n  register,\n  loginWithJwt,\n  logout,\n  getCurrentUser,\n  getJwt,\n};\n"]},"metadata":{},"sourceType":"module"}