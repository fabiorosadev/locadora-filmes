{"ast":null,"code":"var _jsxFileName = \"/Users/fabiorosa/Study/locadora-filmes/frontend/moviestore/src/pages/MovieForm/index.js\";\n\n/* eslint-disable jsx-a11y/anchor-is-valid */\n\n/* eslint-disable react/forbid-prop-types */\nimport React, { useRef, useEffect, useState } from 'react';\nimport { Form } from '@unform/web';\nimport * as Yup from 'yup';\nimport Button from '@material-ui/core/Button';\nimport Container from '@material-ui/core/Container';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport { TextField } from 'unform-material-ui';\nimport Select from '@material-ui/core/Select';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport PropTypes from 'prop-types';\nimport { getMovie, saveMovie } from '../../services/Movies/movieService';\nimport { getGenres } from '../../services/Genres/genreService';\nimport useStyles from './styles';\nexport default function MovieForm({\n  history,\n  match\n}) {\n  const classes = useStyles();\n  const formRef = useRef(null);\n  const [movie, setMovie] = useState({\n    id: 0,\n    name: '',\n    genreId: 0,\n    status: 1,\n    creationDate: new Date().toISOString()\n  });\n  const [genres, setGenres] = useState([]);\n  const [status, setStatus] = useState(true);\n  const schema = Yup.object().shape({\n    name: Yup.string().required('Nome é obrigatório!'),\n    genreId: Yup.number().moreThan(0, 'Gênero é obrigatório!')\n  });\n\n  const handleSubmit = async data => {\n    try {\n      // Remove all previous errors\n      formRef.current.setErrors({});\n      await schema.validate(data, {\n        abortEarly: false\n      }); // Validation passed\n\n      movie.name = data.name;\n      movie.genreId = data.genreId;\n      movie.status = status ? 1 : 0;\n      await saveMovie(movie);\n      history.push('/movies');\n    } catch (err) {\n      const validationErrors = {};\n\n      if (err instanceof Yup.ValidationError) {\n        err.inner.forEach(error => {\n          validationErrors[error.path] = error.message;\n        });\n        formRef.current.setErrors(validationErrors);\n      }\n    }\n  };\n\n  const handleChangeStatus = event => {\n    setStatus(event.target.checked);\n  };\n\n  const handleCancel = () => {\n    history.push('/movies');\n  };\n\n  useEffect(() => {\n    const loadData = async () => {\n      const {\n        data: allGenres\n      } = await getGenres();\n      setGenres(allGenres);\n      const {\n        id\n      } = match.params;\n\n      if (id > 0) {\n        const {\n          data\n        } = await getMovie(id);\n        formRef.current.setData(data);\n        setStatus(data.status === 1);\n        setMovie(data);\n      } else {\n        formRef.current.setData(movie);\n      }\n    };\n\n    loadData();\n  }, []);\n  return /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    component: \"h1\",\n    variant: \"h5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, \"Filme\"), /*#__PURE__*/React.createElement(Form, {\n    ref: formRef,\n    onSubmit: handleSubmit,\n    className: classes.form,\n    noValidate: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    name: \"name\",\n    variant: \"outlined\",\n    margin: \"normal\",\n    fullWidth: true,\n    label: \"Nome\",\n    autoComplete: \"name\",\n    autoFocus: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"outlined\",\n    className: classes.formControl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    id: \"demo-simple-select-outlined-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, \"Age\"), /*#__PURE__*/React.createElement(Select, {\n    labelId: \"demo-simple-select-outlined-label\",\n    id: \"demo-simple-select-outlined\",\n    value: age,\n    onChange: handleChange,\n    label: \"Age\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"em\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, \"None\")), /*#__PURE__*/React.createElement(MenuItem, {\n    value: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }, \"Ten\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }, \"Twenty\"), /*#__PURE__*/React.createElement(MenuItem, {\n    value: 30,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  }, \"Thirty\"))), /*#__PURE__*/React.createElement(Select, {\n    name: \"genreId\",\n    variant: \"outlined\",\n    margin: \"normal\",\n    fullWidth: true,\n    label: \"G\\xEAnero\",\n    autoComplete: \"genreId\",\n    autoFocus: true,\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 11\n    }\n  }, genres.map(g => /*#__PURE__*/React.createElement(MenuItem, {\n    fullWidth: true,\n    value: g.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  }, g.name))), /*#__PURE__*/React.createElement(FormControlLabel, {\n    control: /*#__PURE__*/React.createElement(Checkbox, {\n      name: \"status\",\n      color: \"primary\",\n      checked: status,\n      onChange: handleChangeStatus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 15\n      }\n    }),\n    label: \"Ativo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    fullWidth: true,\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.submit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  }, \"Salvar\"), /*#__PURE__*/React.createElement(Button, {\n    type: \"button\",\n    fullWidth: true,\n    variant: \"contained\",\n    color: \"secondary\",\n    onClick: handleCancel,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 11\n    }\n  }, \"Cancelar\"))));\n}\nMovieForm.defaultProps = {\n  history: null,\n  match: null\n};\nMovieForm.propTypes = {\n  history: PropTypes.any,\n  match: PropTypes.any\n};","map":{"version":3,"sources":["/Users/fabiorosa/Study/locadora-filmes/frontend/moviestore/src/pages/MovieForm/index.js"],"names":["React","useRef","useEffect","useState","Form","Yup","Button","Container","FormControlLabel","CssBaseline","Typography","TextField","Select","FormControl","InputLabel","Checkbox","MenuItem","PropTypes","getMovie","saveMovie","getGenres","useStyles","MovieForm","history","match","classes","formRef","movie","setMovie","id","name","genreId","status","creationDate","Date","toISOString","genres","setGenres","setStatus","schema","object","shape","string","required","number","moreThan","handleSubmit","data","current","setErrors","validate","abortEarly","push","err","validationErrors","ValidationError","inner","forEach","error","path","message","handleChangeStatus","event","target","checked","handleCancel","loadData","allGenres","params","setData","paper","form","formControl","age","handleChange","width","map","g","submit","defaultProps","propTypes","any"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\n/* eslint-disable react/forbid-prop-types */\nimport React, { useRef, useEffect, useState } from 'react';\nimport { Form } from '@unform/web';\nimport * as Yup from 'yup';\nimport Button from '@material-ui/core/Button';\nimport Container from '@material-ui/core/Container';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport Typography from '@material-ui/core/Typography';\nimport { TextField } from 'unform-material-ui';\nimport Select from '@material-ui/core/Select';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport PropTypes from 'prop-types';\nimport { getMovie, saveMovie } from '../../services/Movies/movieService';\nimport { getGenres } from '../../services/Genres/genreService';\nimport useStyles from './styles';\n\nexport default function MovieForm({ history, match }) {\n  const classes = useStyles();\n\n  const formRef = useRef(null);\n\n  const [movie, setMovie] = useState({\n    id: 0,\n    name: '',\n    genreId: 0,\n    status: 1,\n    creationDate: new Date().toISOString(),\n  });\n  const [genres, setGenres] = useState([]);\n  const [status, setStatus] = useState(true);\n\n  const schema = Yup.object().shape({\n    name: Yup.string().required('Nome é obrigatório!'),\n    genreId: Yup.number().moreThan(0, 'Gênero é obrigatório!'),\n  });\n\n  const handleSubmit = async data => {\n    try {\n      // Remove all previous errors\n      formRef.current.setErrors({});\n      await schema.validate(data, {\n        abortEarly: false,\n      });\n      // Validation passed\n      movie.name = data.name;\n      movie.genreId = data.genreId;\n      movie.status = status ? 1 : 0;\n      await saveMovie(movie);\n      history.push('/movies');\n    } catch (err) {\n      const validationErrors = {};\n      if (err instanceof Yup.ValidationError) {\n        err.inner.forEach(error => {\n          validationErrors[error.path] = error.message;\n        });\n        formRef.current.setErrors(validationErrors);\n      }\n    }\n  };\n\n  const handleChangeStatus = event => {\n    setStatus(event.target.checked);\n  };\n\n  const handleCancel = () => {\n    history.push('/movies');\n  };\n\n  useEffect(() => {\n    const loadData = async () => {\n      const { data: allGenres } = await getGenres();\n      setGenres(allGenres);\n      const { id } = match.params;\n      if (id > 0) {\n        const { data } = await getMovie(id);\n        formRef.current.setData(data);\n        setStatus(data.status === 1);\n        setMovie(data);\n      } else {\n        formRef.current.setData(movie);\n      }\n    };\n    loadData();\n  }, []);\n\n  return (\n    <Container component=\"main\" maxWidth=\"xs\">\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Typography component=\"h1\" variant=\"h5\">\n          Filme\n        </Typography>\n        <Form\n          ref={formRef}\n          onSubmit={handleSubmit}\n          className={classes.form}\n          noValidate\n        >\n          <TextField\n            name=\"name\"\n            variant=\"outlined\"\n            margin=\"normal\"\n            fullWidth\n            label=\"Nome\"\n            autoComplete=\"name\"\n            autoFocus\n          />\n          <FormControl variant=\"outlined\" className={classes.formControl}>\n            <InputLabel id=\"demo-simple-select-outlined-label\">Age</InputLabel>\n            <Select\n              labelId=\"demo-simple-select-outlined-label\"\n              id=\"demo-simple-select-outlined\"\n              value={age}\n              onChange={handleChange}\n              label=\"Age\"\n            >\n              <MenuItem value=\"\">\n                <em>None</em>\n              </MenuItem>\n              <MenuItem value={10}>Ten</MenuItem>\n              <MenuItem value={20}>Twenty</MenuItem>\n              <MenuItem value={30}>Thirty</MenuItem>\n            </Select>\n          </FormControl>\n          <Select\n            name=\"genreId\"\n            variant=\"outlined\"\n            margin=\"normal\"\n            fullWidth\n            label=\"Gênero\"\n            autoComplete=\"genreId\"\n            autoFocus\n            style={{ width: '100%' }}\n          >\n            {genres.map(g => (\n              <MenuItem fullWidth value={g.id}>\n                {g.name}\n              </MenuItem>\n            ))}\n          </Select>\n          <FormControlLabel\n            control={\n              <Checkbox\n                name=\"status\"\n                color=\"primary\"\n                checked={status}\n                onChange={handleChangeStatus}\n              />\n            }\n            label=\"Ativo\"\n          />\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n          >\n            Salvar\n          </Button>\n          <Button\n            type=\"button\"\n            fullWidth\n            variant=\"contained\"\n            color=\"secondary\"\n            onClick={handleCancel}\n          >\n            Cancelar\n          </Button>\n        </Form>\n      </div>\n    </Container>\n  );\n}\n\nMovieForm.defaultProps = {\n  history: null,\n  match: null,\n};\n\nMovieForm.propTypes = {\n  history: PropTypes.any,\n  match: PropTypes.any,\n};\n"]},"metadata":{},"sourceType":"module"}