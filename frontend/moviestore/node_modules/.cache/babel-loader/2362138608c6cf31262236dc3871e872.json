{"ast":null,"code":"var _jsxFileName = \"/Users/fabiorosa/Study/locadora-filmes/frontend/moviestore/src/pages/Rentals/index.js\";\n\n/* eslint-disable react/forbid-prop-types */\nimport React, { useState, useEffect } from 'react';\nimport Container from '@material-ui/core/Container';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport PropTypes from 'prop-types';\nimport Table from '../../components/Table';\nimport { getRentals, deleteRental } from '../../services/Rentals/rentalService';\nimport useStyles from './styles';\nexport default function Rentals({\n  history\n}) {\n  const classes = useStyles();\n  const [selected, setSelected] = useState([]);\n  const [rows, setRows] = useState([]);\n  const headCells = [{\n    id: 'customerCpf',\n    numeric: false,\n    disablePadding: true,\n    label: 'CPF Cliente'\n  }, {\n    id: 'movies',\n    numeric: false,\n    disablePadding: true,\n    label: 'Filmes'\n  }, {\n    id: 'rentalDate',\n    numeric: false,\n    disablePadding: true,\n    label: 'Data Locação'\n  }];\n\n  async function loadRentals() {\n    const {\n      data\n    } = await getRentals();\n    const rentals = data.map(r => {\n      return {\n        id: r.id,\n        customerCpf: r.customerCpf,\n        movies: r.movieRentals.map(mr => mr.movie.name),\n        rentalDate: new Date(r.rentalDate).toLocaleDateString()\n      };\n    });\n    setRows(rentals);\n  }\n\n  useEffect(() => {\n    loadRentals();\n  }, []);\n\n  const handleAdd = () => {\n    history.push('/rentals/0');\n  };\n\n  const handleEdit = () => {\n    const rentalId = selected[0];\n    history.push(`/rentals/${rentalId}`);\n  };\n\n  const handleDelete = async () => {\n    if (selected.length > 1) {\n      console.log('Delete multiple', selected);\n    } else {\n      const rentalId = selected[0];\n      await deleteRental(rentalId);\n    }\n\n    await loadRentals();\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CssBaseline, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    title: \"Loca\\xE7\\xF5es\",\n    headCells: headCells,\n    rows: rows,\n    selected: selected,\n    setSelected: setSelected,\n    defaultSortedProperty: \"name\",\n    onAdd: handleAdd,\n    onEdit: handleEdit,\n    onDelete: handleDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  })));\n}\nRentals.defaultProps = {\n  history: null\n};\nRentals.propTypes = {\n  history: PropTypes.any\n};","map":{"version":3,"sources":["/Users/fabiorosa/Study/locadora-filmes/frontend/moviestore/src/pages/Rentals/index.js"],"names":["React","useState","useEffect","Container","CssBaseline","PropTypes","Table","getRentals","deleteRental","useStyles","Rentals","history","classes","selected","setSelected","rows","setRows","headCells","id","numeric","disablePadding","label","loadRentals","data","rentals","map","r","customerCpf","movies","movieRentals","mr","movie","name","rentalDate","Date","toLocaleDateString","handleAdd","push","handleEdit","rentalId","handleDelete","length","console","log","paper","defaultProps","propTypes","any"],"mappings":";;AAAA;AACA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,MAAkB,wBAAlB;AACA,SAASC,UAAT,EAAqBC,YAArB,QAAyC,sCAAzC;AACA,OAAOC,SAAP,MAAsB,UAAtB;AAEA,eAAe,SAASC,OAAT,CAAiB;AAAEC,EAAAA;AAAF,CAAjB,EAA8B;AAC3C,QAAMC,OAAO,GAAGH,SAAS,EAAzB;AACA,QAAM,CAACI,QAAD,EAAWC,WAAX,IAA0Bb,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACc,IAAD,EAAOC,OAAP,IAAkBf,QAAQ,CAAC,EAAD,CAAhC;AAEA,QAAMgB,SAAS,GAAG,CAChB;AACEC,IAAAA,EAAE,EAAE,aADN;AAEEC,IAAAA,OAAO,EAAE,KAFX;AAGEC,IAAAA,cAAc,EAAE,IAHlB;AAIEC,IAAAA,KAAK,EAAE;AAJT,GADgB,EAOhB;AACEH,IAAAA,EAAE,EAAE,QADN;AAEEC,IAAAA,OAAO,EAAE,KAFX;AAGEC,IAAAA,cAAc,EAAE,IAHlB;AAIEC,IAAAA,KAAK,EAAE;AAJT,GAPgB,EAahB;AACEH,IAAAA,EAAE,EAAE,YADN;AAEEC,IAAAA,OAAO,EAAE,KAFX;AAGEC,IAAAA,cAAc,EAAE,IAHlB;AAIEC,IAAAA,KAAK,EAAE;AAJT,GAbgB,CAAlB;;AAqBA,iBAAeC,WAAf,GAA6B;AAC3B,UAAM;AAAEC,MAAAA;AAAF,QAAW,MAAMhB,UAAU,EAAjC;AACA,UAAMiB,OAAO,GAAGD,IAAI,CAACE,GAAL,CAASC,CAAC,IAAI;AAC5B,aAAO;AACLR,QAAAA,EAAE,EAAEQ,CAAC,CAACR,EADD;AAELS,QAAAA,WAAW,EAAED,CAAC,CAACC,WAFV;AAGLC,QAAAA,MAAM,EAAEF,CAAC,CAACG,YAAF,CAAeJ,GAAf,CAAmBK,EAAE,IAAIA,EAAE,CAACC,KAAH,CAASC,IAAlC,CAHH;AAILC,QAAAA,UAAU,EAAE,IAAIC,IAAJ,CAASR,CAAC,CAACO,UAAX,EAAuBE,kBAAvB;AAJP,OAAP;AAMD,KAPe,CAAhB;AAQAnB,IAAAA,OAAO,CAACQ,OAAD,CAAP;AACD;;AAEDtB,EAAAA,SAAS,CAAC,MAAM;AACdoB,IAAAA,WAAW;AACZ,GAFQ,EAEN,EAFM,CAAT;;AAIA,QAAMc,SAAS,GAAG,MAAM;AACtBzB,IAAAA,OAAO,CAAC0B,IAAR,CAAa,YAAb;AACD,GAFD;;AAIA,QAAMC,UAAU,GAAG,MAAM;AACvB,UAAMC,QAAQ,GAAG1B,QAAQ,CAAC,CAAD,CAAzB;AACAF,IAAAA,OAAO,CAAC0B,IAAR,CAAc,YAAWE,QAAS,EAAlC;AACD,GAHD;;AAKA,QAAMC,YAAY,GAAG,YAAY;AAC/B,QAAI3B,QAAQ,CAAC4B,MAAT,GAAkB,CAAtB,EAAyB;AACvBC,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+B9B,QAA/B;AACD,KAFD,MAEO;AACL,YAAM0B,QAAQ,GAAG1B,QAAQ,CAAC,CAAD,CAAzB;AACA,YAAML,YAAY,CAAC+B,QAAD,CAAlB;AACD;;AACD,UAAMjB,WAAW,EAAjB;AACD,GARD;;AAUA,sBACE,oBAAC,SAAD;AAAW,IAAA,SAAS,EAAC,MAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAK,IAAA,SAAS,EAAEV,OAAO,CAACgC,KAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AACE,IAAA,KAAK,EAAC,gBADR;AAEE,IAAA,SAAS,EAAE3B,SAFb;AAGE,IAAA,IAAI,EAAEF,IAHR;AAIE,IAAA,QAAQ,EAAEF,QAJZ;AAKE,IAAA,WAAW,EAAEC,WALf;AAME,IAAA,qBAAqB,EAAC,MANxB;AAOE,IAAA,KAAK,EAAEsB,SAPT;AAQE,IAAA,MAAM,EAAEE,UARV;AASE,IAAA,QAAQ,EAAEE,YATZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFF,CADF;AAkBD;AAED9B,OAAO,CAACmC,YAAR,GAAuB;AACrBlC,EAAAA,OAAO,EAAE;AADY,CAAvB;AAIAD,OAAO,CAACoC,SAAR,GAAoB;AAClBnC,EAAAA,OAAO,EAAEN,SAAS,CAAC0C;AADD,CAApB","sourcesContent":["/* eslint-disable react/forbid-prop-types */\nimport React, { useState, useEffect } from 'react';\nimport Container from '@material-ui/core/Container';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport PropTypes from 'prop-types';\nimport Table from '../../components/Table';\nimport { getRentals, deleteRental } from '../../services/Rentals/rentalService';\nimport useStyles from './styles';\n\nexport default function Rentals({ history }) {\n  const classes = useStyles();\n  const [selected, setSelected] = useState([]);\n  const [rows, setRows] = useState([]);\n\n  const headCells = [\n    {\n      id: 'customerCpf',\n      numeric: false,\n      disablePadding: true,\n      label: 'CPF Cliente',\n    },\n    {\n      id: 'movies',\n      numeric: false,\n      disablePadding: true,\n      label: 'Filmes',\n    },\n    {\n      id: 'rentalDate',\n      numeric: false,\n      disablePadding: true,\n      label: 'Data Locação',\n    },\n  ];\n\n  async function loadRentals() {\n    const { data } = await getRentals();\n    const rentals = data.map(r => {\n      return {\n        id: r.id,\n        customerCpf: r.customerCpf,\n        movies: r.movieRentals.map(mr => mr.movie.name),\n        rentalDate: new Date(r.rentalDate).toLocaleDateString(),\n      };\n    });\n    setRows(rentals);\n  }\n\n  useEffect(() => {\n    loadRentals();\n  }, []);\n\n  const handleAdd = () => {\n    history.push('/rentals/0');\n  };\n\n  const handleEdit = () => {\n    const rentalId = selected[0];\n    history.push(`/rentals/${rentalId}`);\n  };\n\n  const handleDelete = async () => {\n    if (selected.length > 1) {\n      console.log('Delete multiple', selected);\n    } else {\n      const rentalId = selected[0];\n      await deleteRental(rentalId);\n    }\n    await loadRentals();\n  };\n\n  return (\n    <Container component=\"main\">\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Table\n          title=\"Locações\"\n          headCells={headCells}\n          rows={rows}\n          selected={selected}\n          setSelected={setSelected}\n          defaultSortedProperty=\"name\"\n          onAdd={handleAdd}\n          onEdit={handleEdit}\n          onDelete={handleDelete}\n        />\n      </div>\n    </Container>\n  );\n}\n\nRentals.defaultProps = {\n  history: null,\n};\n\nRentals.propTypes = {\n  history: PropTypes.any,\n};\n"]},"metadata":{},"sourceType":"module"}