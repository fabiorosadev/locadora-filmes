{"ast":null,"code":"import jwtDecode from 'jwt-decode';\nimport http, { setJwt } from '../httpService';\nconst apiAuthEndpoint = '/auth';\nconst tokenKey = 'token';\nexport async function login(userName, password) {\n  const {\n    data\n  } = await http.post(`${apiAuthEndpoint}/login`, {\n    userName,\n    password\n  });\n  localStorage.setItem(tokenKey, data.token);\n}\nexport async function register(userName, password) {\n  const {\n    data: jwt\n  } = await http.post(apiAuthEndpoint, {\n    userName,\n    password\n  });\n  localStorage.setItem(tokenKey, jwt);\n}\nexport function loginWithJwt(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n}\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n}\nexport function getJwt() {\n  return localStorage.getItem(tokenKey);\n}\nsetJwt(getJwt());\nexport default {\n  login,\n  register,\n  loginWithJwt,\n  logout,\n  getCurrentUser,\n  getJwt\n};","map":{"version":3,"sources":["/Users/fabiorosa/Study/locadora-filmes/frontend/moviestore/src/services/Auth/authService.js"],"names":["jwtDecode","http","setJwt","apiAuthEndpoint","tokenKey","login","userName","password","data","post","localStorage","setItem","token","register","jwt","loginWithJwt","logout","removeItem","getCurrentUser","getItem","ex","getJwt"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,OAAOC,IAAP,IAAeC,MAAf,QAA6B,gBAA7B;AAEA,MAAMC,eAAe,GAAG,OAAxB;AACA,MAAMC,QAAQ,GAAG,OAAjB;AAEA,OAAO,eAAeC,KAAf,CAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAC9C,QAAM;AAAEC,IAAAA;AAAF,MAAW,MAAMP,IAAI,CAACQ,IAAL,CAAW,GAAEN,eAAgB,QAA7B,EAAsC;AAC3DG,IAAAA,QAD2D;AAE3DC,IAAAA;AAF2D,GAAtC,CAAvB;AAIAG,EAAAA,YAAY,CAACC,OAAb,CAAqBP,QAArB,EAA+BI,IAAI,CAACI,KAApC;AACD;AAED,OAAO,eAAeC,QAAf,CAAwBP,QAAxB,EAAkCC,QAAlC,EAA4C;AACjD,QAAM;AAAEC,IAAAA,IAAI,EAAEM;AAAR,MAAgB,MAAMb,IAAI,CAACQ,IAAL,CAAUN,eAAV,EAA2B;AACrDG,IAAAA,QADqD;AAErDC,IAAAA;AAFqD,GAA3B,CAA5B;AAIAG,EAAAA,YAAY,CAACC,OAAb,CAAqBP,QAArB,EAA+BU,GAA/B;AACD;AAED,OAAO,SAASC,YAAT,CAAsBD,GAAtB,EAA2B;AAChCJ,EAAAA,YAAY,CAACC,OAAb,CAAqBP,QAArB,EAA+BU,GAA/B;AACD;AAED,OAAO,SAASE,MAAT,GAAkB;AACvBN,EAAAA,YAAY,CAACO,UAAb,CAAwBb,QAAxB;AACD;AAED,OAAO,SAASc,cAAT,GAA0B;AAC/B,MAAI;AACF,UAAMJ,GAAG,GAAGJ,YAAY,CAACS,OAAb,CAAqBf,QAArB,CAAZ;AACA,WAAOJ,SAAS,CAACc,GAAD,CAAhB;AACD,GAHD,CAGE,OAAOM,EAAP,EAAW;AACX,WAAO,IAAP;AACD;AACF;AAED,OAAO,SAASC,MAAT,GAAkB;AACvB,SAAOX,YAAY,CAACS,OAAb,CAAqBf,QAArB,CAAP;AACD;AAEDF,MAAM,CAACmB,MAAM,EAAP,CAAN;AAEA,eAAe;AACbhB,EAAAA,KADa;AAEbQ,EAAAA,QAFa;AAGbE,EAAAA,YAHa;AAIbC,EAAAA,MAJa;AAKbE,EAAAA,cALa;AAMbG,EAAAA;AANa,CAAf","sourcesContent":["import jwtDecode from 'jwt-decode';\nimport http, { setJwt } from '../httpService';\n\nconst apiAuthEndpoint = '/auth';\nconst tokenKey = 'token';\n\nexport async function login(userName, password) {\n  const { data } = await http.post(`${apiAuthEndpoint}/login`, {\n    userName,\n    password,\n  });\n  localStorage.setItem(tokenKey, data.token);\n}\n\nexport async function register(userName, password) {\n  const { data: jwt } = await http.post(apiAuthEndpoint, {\n    userName,\n    password,\n  });\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function loginWithJwt(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\n\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n}\n\nexport function getJwt() {\n  return localStorage.getItem(tokenKey);\n}\n\nsetJwt(getJwt());\n\nexport default {\n  login,\n  register,\n  loginWithJwt,\n  logout,\n  getCurrentUser,\n  getJwt,\n};\n"]},"metadata":{},"sourceType":"module"}