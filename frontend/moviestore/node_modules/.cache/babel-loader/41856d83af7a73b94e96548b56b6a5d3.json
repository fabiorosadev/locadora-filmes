{"ast":null,"code":"import jwtDecode from 'jwt-decode';\nimport http, { setJwt } from '../httpService';\nconst apiAuthEndpoint = '/auth';\nconst tokenKey = 'token';\nexport async function login(userName, password) {\n  const jwt = await http.post(`${apiAuthEndpoint}/login`, {\n    userName,\n    password\n  });\n  console.log(jwt);\n  localStorage.setItem(tokenKey, jwt);\n}\nexport async function register(userName, password) {\n  const {\n    data: jwt\n  } = await http.post(apiAuthEndpoint, {\n    userName,\n    password\n  });\n  localStorage.setItem(tokenKey, jwt);\n}\nexport function loginWithJwt(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n}\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n}\nexport function getJwt() {\n  return localStorage.getItem(tokenKey);\n}\nsetJwt(getJwt());\nexport default {\n  login,\n  register,\n  loginWithJwt,\n  logout,\n  getCurrentUser,\n  getJwt\n};","map":{"version":3,"sources":["/Users/fabiorosa/Study/locadora-filmes/frontend/moviestore/src/services/Auth/authService.js"],"names":["jwtDecode","http","setJwt","apiAuthEndpoint","tokenKey","login","userName","password","jwt","post","console","log","localStorage","setItem","register","data","loginWithJwt","logout","removeItem","getCurrentUser","getItem","ex","getJwt"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,OAAOC,IAAP,IAAeC,MAAf,QAA6B,gBAA7B;AAEA,MAAMC,eAAe,GAAG,OAAxB;AACA,MAAMC,QAAQ,GAAG,OAAjB;AAEA,OAAO,eAAeC,KAAf,CAAqBC,QAArB,EAA+BC,QAA/B,EAAyC;AAC9C,QAAMC,GAAG,GAAG,MAAMP,IAAI,CAACQ,IAAL,CAAW,GAAEN,eAAgB,QAA7B,EAAsC;AACtDG,IAAAA,QADsD;AAEtDC,IAAAA;AAFsD,GAAtC,CAAlB;AAIAG,EAAAA,OAAO,CAACC,GAAR,CAAYH,GAAZ;AACAI,EAAAA,YAAY,CAACC,OAAb,CAAqBT,QAArB,EAA+BI,GAA/B;AACD;AAED,OAAO,eAAeM,QAAf,CAAwBR,QAAxB,EAAkCC,QAAlC,EAA4C;AACjD,QAAM;AAAEQ,IAAAA,IAAI,EAAEP;AAAR,MAAgB,MAAMP,IAAI,CAACQ,IAAL,CAAUN,eAAV,EAA2B;AACrDG,IAAAA,QADqD;AAErDC,IAAAA;AAFqD,GAA3B,CAA5B;AAIAK,EAAAA,YAAY,CAACC,OAAb,CAAqBT,QAArB,EAA+BI,GAA/B;AACD;AAED,OAAO,SAASQ,YAAT,CAAsBR,GAAtB,EAA2B;AAChCI,EAAAA,YAAY,CAACC,OAAb,CAAqBT,QAArB,EAA+BI,GAA/B;AACD;AAED,OAAO,SAASS,MAAT,GAAkB;AACvBL,EAAAA,YAAY,CAACM,UAAb,CAAwBd,QAAxB;AACD;AAED,OAAO,SAASe,cAAT,GAA0B;AAC/B,MAAI;AACF,UAAMX,GAAG,GAAGI,YAAY,CAACQ,OAAb,CAAqBhB,QAArB,CAAZ;AACA,WAAOJ,SAAS,CAACQ,GAAD,CAAhB;AACD,GAHD,CAGE,OAAOa,EAAP,EAAW;AACX,WAAO,IAAP;AACD;AACF;AAED,OAAO,SAASC,MAAT,GAAkB;AACvB,SAAOV,YAAY,CAACQ,OAAb,CAAqBhB,QAArB,CAAP;AACD;AAEDF,MAAM,CAACoB,MAAM,EAAP,CAAN;AAEA,eAAe;AACbjB,EAAAA,KADa;AAEbS,EAAAA,QAFa;AAGbE,EAAAA,YAHa;AAIbC,EAAAA,MAJa;AAKbE,EAAAA,cALa;AAMbG,EAAAA;AANa,CAAf","sourcesContent":["import jwtDecode from 'jwt-decode';\nimport http, { setJwt } from '../httpService';\n\nconst apiAuthEndpoint = '/auth';\nconst tokenKey = 'token';\n\nexport async function login(userName, password) {\n  const jwt = await http.post(`${apiAuthEndpoint}/login`, {\n    userName,\n    password,\n  });\n  console.log(jwt);\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport async function register(userName, password) {\n  const { data: jwt } = await http.post(apiAuthEndpoint, {\n    userName,\n    password,\n  });\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function loginWithJwt(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n}\n\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\n\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey);\n    return jwtDecode(jwt);\n  } catch (ex) {\n    return null;\n  }\n}\n\nexport function getJwt() {\n  return localStorage.getItem(tokenKey);\n}\n\nsetJwt(getJwt());\n\nexport default {\n  login,\n  register,\n  loginWithJwt,\n  logout,\n  getCurrentUser,\n  getJwt,\n};\n"]},"metadata":{},"sourceType":"module"}